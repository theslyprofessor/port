// const Port = require('port');
// const readline = require('readline');

// const port = new Port({
//     read: 8005,
//     write: 8006,
//     encoding: 'ascii',
//     basepath: __dirname,
//     flags: {
//         noprefs: true,
//         stderr: true,
//         send: 'pd dsp 1, dsp 0',
//         open: './port.pd',
// 		verbose: true
//     }
// });

// port.on('connect', () => {
//     console.log('on connect');
//     port.write('a message to pd;\n');
// });

// port.on('stderr', (buffer) => {
//     console.log('on stderr');
//     console.log(buffer.toString());
// });

// // Initialize readline interface
// const rl = readline.createInterface({
//     input: process.stdin,
//     output: process.stdout
// });

// // Prompt user for input
// rl.setPrompt('Enter command: ');
// rl.prompt();

// rl.on('line', (input) => {
//     console.log(`Received command: ${input}`);

//     // Example command handling
//     if (input === 'exit') {
//         console.log('Exiting...');
//         port.close(); // Make sure to close the port if 'exit' command is given
//         rl.close();
//     } else {
//         // Handle other commands, for example, send input as a command to 'port'
//         port.write(`${input}\n`);
//     }

//     rl.prompt(); // Prompt for next command
// }).on('close', () => {
//     console.log('Command interface closed.');
//     process.exit(0);
// });

// port.create();

//-----------------------------------------------------------------------------------------------
const Port = require('port');

const port = new Port({
    read: 8005,
    write: 8006,
    encoding: 'ascii',
    basepath: __dirname,
    flags: {
        noprefs: true,
        stderr: true,
        send: 'pd dsp 1, dsp 0',
        open: './port.pd',
		verbose: true
    }
});

port.on('connect', () => {
    console.log('on connect');
    port.write('a message to pd;\n');
});

port.on('stderr', (buffer) => {
    console.log('on stderr');
    console.log(buffer.toString());
});

port.create();
//-----------------------------------------------------------------------------------------------
// var port = require('port');

// new port({
// 	'read': 8005,
// 	'write': 8006,
// 	'encoding': 'ascii',
// 	'basepath': __dirname,
// 	'flags': {
// 		'noprefs': true,
// 		'stderr': true,
// 		'send': 'pd dsp 1, dsp 0',
// 		'open': './port.pd'
// 	}
// })
// .on('connect', function(){
// 	console.log('on connect');
// 	this.write('a message to pd;\n');
// })
// .on('stderr', function(buffer){
// 	console.log('on stderr');
// 	console.log(buffer.toString());
// })
// .create();
